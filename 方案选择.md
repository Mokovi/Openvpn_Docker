## 方案选择指引

## 一、方案一览对比

| 方案                       | 技术类型          | 可否无需公网 IP | 是否需自建服务器 | 访问范围                   | 运维复杂度 | 成本     | 典型场景                             |
| -------------------------- | ----------------- | --------------- | ---------------- | -------------------------- | ---------- | -------- | ------------------------------------ |
| `Tailscale`                | 托管 `WireGuard`  | 是              | 否               | 整个子网（可启用子网路由） | 低         | 付费托管 | 团队零配置快速互联、分布办公         |
| `ZeroTier`                 | `SD‑WAN` 虚拟网卡 | 是              | 否               | 整个子网（支持多网段）     | 低中       | 免费     | 灵活 SDN 拓扑、自定义路由            |
| `OpenVPN Site‑to‑Site VPN` | `SSL/TLS VPN`     | 否              | 可选（云/本地）  | 整个子网、跨网段           | 中         | 中       | 企业级多网段互联、细粒度 ACL 管控    |
| 云端 `VPS + WireGuard S2S` | `WireGuard VPN`   | 否              | 是（云端）       | 整个子网、跨网段           | 中低       | 云主机费 | 无本地公网 IP，多站点集中中转        |
| `FRP`                      | 应用层反向代理    | 否              | 是               | 指定端口/服务              | 低         | 云主机费 | 少量服务映射（`Web/SSH/自定义 TCP`） |

------

## 二、方案分类与详细说明

### 1. P2P 零配置虚拟网络方案

#### 1.1 `Tailscale`

- **技术原理**：基于 `WireGuard` 协议，由官方控制平面管理密钥与打洞，客户端安装后自动形成网状网络。
- **优点**：
  - 完全`P2P`通信，无需公网 `IP`。
  - 内置 `OAuth` 及 `ACL`，可与企业账号（Google/GitHub/Office 365）同步。
  - 支持子网路由，快速将整个 `192.168.x.x` 子网广告到网络中。
  - 托管式运维，无需自行维护证书或隧道监控。
- **缺点**：
  - 免费版限制:3个用户、100个设备。
  - 数据在无法打洞时会经官方中继，可能产生延迟或流量费用。
- **典型场景**：
  - 小团队、远程办公、现场运维访问。
  - 家庭 NAS、IoT 设备远程管理。

#### 1.2 `ZeroTier`

- **技术原理**：基于自有 `SDN` 框架，将设备纳入同一逻辑网段，支持 `P2P` 及中继。
- **优点**：
  - 免费无限节点。
  - 支持多子网、`VLAN` 模式、桥接模式与自定义路由表。
  - 控制台集中管理网络成员与路由。
- **缺点**：
  - 需要手动授权新节点。
  - 高级路由/桥接配置对新手略有挑战。
- **典型场景**：
  - 复杂拓扑需求，如多地分支互联。
  - 软件定义网络实验与开发。

------

### 2. 传统/自建 `VPN` 方案

#### 2.1 `OpenVPN Site‑to‑Site VPN`

- **技术原理**：基于 `SSL/TLS` 隧道，在网络层（`L3`）建立虚拟网卡与路由。
- **优点**：
  - 经久成熟，兼容多个客户端平台。
  - 支持证书、用户名/密码（`PAM`）、`RADIUS/LDAP` 集中认证。
  - 细粒度 `ACL`、可实现分组访问控制。
- **缺点**：
  - 需自建或租用具有公网 IP 的服务器。
  - 证书与路由配置复杂，对运维门槛较高。
- **典型场景**：
  - 企业总部与多个分支机构互联。
  - 大型内网多网段互通与安全隔离。

#### 2.2 云端 `VPS` + `WireGuard S2S`

- **技术原理**：基于 `WireGuard` 协议，采用云端 `VPS` 做中转站，实现 `Site‑to‑Site VPN`。
- **优点**：
  - `WireGuard` 配置文件简洁，性能优。
  - 中转集中化管理，一台云端可连接多处内网。
  - 支持脚本或 `WG‑Easy` 图形化界面管理用户。
- **缺点**：
  - 仍需租用或自建云服务器并维护。
  - 本地网关需安装 `WireGuard`。
- **典型场景**：
  - 小型企业/办公室无公网 IP 环境下的多点互联。
  - 多地站点通过同一 `VPS` 聚合接入。

------

### 3. 端口/服务映射方案

#### 3.1 `FRP`

- **技术原理**：在应用层将内网指定服务端口反向代理到公网中转机上。
- **优点**：
  - 配置极简，对单服务快速暴露。
  - `Dashboard` 可实时监控各服务状态。
  - 支持跨 `NAT/防火墙穿透`。
- **缺点**：
  - 只能访问配置的端口，无法做整网访问。
  - 依赖中转服务器的公网 `IP`。
- **典型场景**：
  - 远程访问内网 `Web` 管理界面、`SSH` 登录、数据库客户端。
  - 临时演示或突发排障。

------

## 三、选型建议

1. **整网段透明访问**：采用 **`P2P` 虚拟网卡（`Tailscale/ZeroTier`）** 或 **自建 `VPN`（`OpenVPN/WireGuard`）**。
   - 若无需自建服务器、追求轻量运维 → **`Tailscale`**。
   - 若需要自定义拓扑、桥接多网段 → **`ZeroTier`**。
   - 若有公网服务器、需企业级 ACL → **`OpenVPN`**。
   - 若已有云 VPS、注重性能与简洁 → **`WireGuard S2S`**。
2. **仅对特定服务开放**：采用 **`FRP`** 或同类内网穿透工具。
   - 简单映射 Web/SSH → **`FRP`**。
   - 临时演示、快速排障 → **`Ngrok`** 或 **内网穿透宝**。
3. **安全合规与审计**：选择支持集中认证与日志审计的方案。
   - 企业级 → **`OpenVPN` + `RADIUS/LDAP`**。
   - 托管型 P2P → **`Tailscale`**。
